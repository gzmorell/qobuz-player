<div
  class="flex flex-wrap gap-4 justify-center items-end w-full p-safe-or-4 *:max-w-sm"
>
  <img
    src="{{ album.image }}"
    alt="{{ album.title }}"
    class="object-contain rounded-lg size-full"
  />

  <div class="flex flex-col grow gap-4 items-center w-full">
    <div
      class="flex flex-col gap-2 justify-center items-center w-full text-center"
    >
      <a
        href="/artist/{{ album.artist.id }}"
        class="text-gray-400 rounded sm:text-lg"
      >
        {{ album.artist.name }}
      </a>
      <span class="text-lg sm:text-xl">{{ album.title }}</span>
      <span class="flex gap-2 text-gray-400 sm:text-lg">
        <span>{{ album.release_year }}</span>
        <span>•︎</span>
        <span>{{ duration }} minutes</span>
      </span>
    </div>

    @defer (button-group.html) {
      <button
        class="button button-primary"
        hx-swap="none"
        hx-put="/album/{{ album.id }}/play"
      >
        <span class="size-6">
          @defer (icons/play.html) {}
        </span>
        <span>Play</span>
      </button>

      @defer (
        toggle-favorite.html;
        id=album.id;
        is_favorite=is_favorite;
        api="/album"
      ) {}
      @if (rfid) {
        <button
          class="button button-primary"
          hx-swap="none"
          hx-put="{{ album.id }}/link"
        >
          <span class="size-6">
            @defer (icons/link.html) {}
          </span>
          <span>Link RFID</span>
        </button>
      }
    }
  </div>
</div>
<div class="flex flex-col gap-4 w-full">
  <div class="sm:p-4">
    @defer (
      album-tracks.html;
      album=album;
      playing_info=playing_info;
      click=click
    ) {}
  </div>

  @if (suggested_albums) {
    <div class="flex flex-col gap-2 w-full">
      <h3 class="px-4 text-lg">Album suggestions</h3>
      @defer (list-albums-vertical.html; albums=suggested_albums) {}
    </div>
  }
  @if (album.description) {
    @defer (
      description.html;
      description=album.description;
      title=album.title
    ) {}
  }
</div>
